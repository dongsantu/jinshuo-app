{"version":3,"sources":["webpack:///E:/svn/ymkj-zby/yimaiTrip/main.js","webpack:///E:/svn/ymkj-zby/yimaiTrip/pages/product/order.vue?56ed","webpack:///E:/svn/ymkj-zby/yimaiTrip/pages/product/order.vue?4bca","webpack:///E:/svn/ymkj-zby/yimaiTrip/pages/product/order.vue?9c45","webpack:///E:/svn/ymkj-zby/yimaiTrip/pages/product/order.vue?0198","webpack:///E:/svn/ymkj-zby/yimaiTrip/pages/product/order.vue","webpack:///E:/svn/ymkj-zby/yimaiTrip/pages/product/order.vue?314c","webpack:///E:/svn/ymkj-zby/yimaiTrip/pages/product/order.vue?c51b"],"names":["createPage","Page","components","sunuiStepper","uniPopup","data","lock","couponNum","params","couponReceiveId","couponAmount","orderNo","orderId","max","startT","endT","endTime","d","h","m","s","showDetail","showPay","step","product","id","order","watch","isToken","init","computed","$store","state","login","token","qry","JSON","stringify","count","targetId","skuId","goodsOrderDetailCmdList","number","skus","sumPrice","price","console","log","spuOtherDto","courierFee","Number","toFixed","onLoad","onShow","$root","$mp","query","uni","getStorageSync","parse","onHide","setStorageSync","onUnload","methods","gotoSuccess","setTimeout","reLaunch","url","gotoDetail","onBridgeReady","appId","timeStamp","nonceStr","paypackage","paySign","_this","WeixinJSBridge","invoke","res","err_msg","showToast","title","duration","icon","submitWXOrderFun","then","dataR","result","return_code","return_msg","result_code","err_code_des","needPay","payappId","paytimestamp","paynonceStr","catch","e","changeSku","item","goodsSkuId","blurFun","window","scrollTo","getMyCouponByTargetIdFun","retCode","total","payFun","createOrderFun","inviteCode","closePay","retMsg","getSpuInfoBySpuIdFun","stock","buyEndDate","buyStartDate","dateUtils","getTimeF","goodsSpuId","spuId","orderType","typeId","skuPrice","spuDescDto","mobileDesc","replace","bookingNotes","address","goodsOrderAddressCmd","userName","userPhone","userAddress","submitFun","validator","ifEmpty","ifPhone","$refs","popup","close","popup1","open","showDetailFun","hideDetailF","$parent","hideDetailFun","stepperChange","obj","val"],"mappings":"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","file":"pages/product/order.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/product/order.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./order.vue?vue&type=template&id=54652c74&scoped=true&\"\nimport script from \"./order.vue?vue&type=script&lang=js&\"\nexport * from \"./order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order.vue?vue&type=style&index=0&id=54652c74&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54652c74\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('54652c74', component.options)\n    } else {\n      api.reload('54652c74', component.options)\n    }\n    module.hot.accept(\"./order.vue?vue&type=template&id=54652c74&scoped=true&\", function () {\n      api.rerender('54652c74', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"E:/svn/ymkj-zby/yimaiTrip/pages/product/order.vue\"\nexport default component.exports","export * from \"-!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-hbuilderx\\\\packages\\\\webpack-uni-nvue-loader\\\\lib\\\\templateLoader.js??vue-loader-options!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=template&id=54652c74&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n//import loading from '@/components/_loading';\nimport uniPopup from \"@/components/uni-popup/uni-popup.vue\"\nimport sunuiStepper from '@/components/sunui-stepper/sunui-stepper.vue'\nimport {getSpuInfoBySpuId,createOrder,getMyCouponByTargetId,submitWXOrder} from \"@/http/product.js\"\nimport {dateUtils, validator} from \"@/common/util.js\"\n//let lock= false;\nexport default {\n\tcomponents:{sunuiStepper,uniPopup},\n\tdata(){\n\t\treturn {\n\t\t\tlock:false,\n\t\t\tcouponNum:'',\n\t\t\tparams:{\n\t\t\t\t//\"count\":1,\n\t\t\t\t//\"useStatus\":0,\n\t\t\t\t\"targetCmds\":[],\n\t\t\t\t\"pageNum\": 1,\n\t\t\t\t\"pageSize\": 10,\n\t\t\t\t//\"targetId\":''\n\t\t\t},\n\t\t\tcouponReceiveId:'',\n\t\t\tcouponAmount:'',\n\t\t\torderNo:'',\n\t\t\torderId:'',\n\t\t\tmax:10,\n\t\t\tstartT:'',\n\t\t\tendT:'',\n\t\t\tendTime:{\n\t\t\t\td:0,\n\t\t\t\th:0,\n\t\t\t\tm:0,\n\t\t\t\ts:0\n\t\t\t},\n\t\t\tshowDetail:false,\n\t\t\tshowPay:false,\n\t\t\tstep:1,\n\t\t\tproduct:{\n\t\t\t\tid:''\n\t\t\t},\n\t\t\torder:{\n\t\t\t  \"inviteCode\":'',\n\t\t\t  \"goodsCount\": 1,\n\t\t\t  \"goodsOrderAddressCmd\": {\n\t\t\t\t\"userAddress\": \"\",\n\t\t\t\t\"userName\": \"\",\n\t\t\t\t\"userPhone\": \"\"\n\t\t\t  },\n\t\t\t  \"goodsOrderDetailCmdList\": [\n\t\t\t\t{\n\t\t\t\t  \"discountAmount\": 0,\n\t\t\t\t  \"discountRate\": 0,\n\t\t\t\t  \"goodsSkuId\": 0,\n\t\t\t\t  \"goodsSpuId\": 0,\n\t\t\t\t  \"number\": 1,\n\t\t\t\t  \"remarks\": \"\",\n\t\t\t\t  \"price\":''\n\t\t\t\t}\n\t\t\t  ],\n\t\t\t  \"memberId\": 111111,\n\t\t\t  \"orderType\": 1,\n\t\t\t  \"remarks\": \"\",\n\t\t\t  \"supplierId\": '1111'\n\t\t\t}\n\t\t}\n\t},\n\twatch:{\n\t\tisToken(){\n\t\t\tthis.init();\n\t\t}\n\t},\n\tcomputed:{\n\t\tisToken() {\n\t\t    return this.$store.state.login ? this.$store.state.login.token :''\n\t\t},\n\t\tqry(){\n\t\t\treturn JSON.stringify([{count:this.count ? this.count : 1, targetId: this.skuId}])\n\t\t},\n\t\tcount(){\n\t\t\treturn this.order.goodsOrderDetailCmdList? this.order.goodsOrderDetailCmdList[0].number :1\n\t\t},\n\t\tskuId(){\n\t\t\tif(this.product.skus){\n\t\t\t\treturn this.product.skus[0].id;\n\t\t\t}\n\t\t\treturn '';\n\t\t},\n\t\tsumPrice(){\n\t\t\tlet price = 0;\n\t\t\tconsole.log('this.order.goodsOrderDetailCmdList',this.order.goodsOrderDetailCmdList)\n\t\t\tif(this.order.goodsOrderDetailCmdList[0].price){\n\t\t\t\tprice = this.order.goodsOrderDetailCmdList[0].number * this.order.goodsOrderDetailCmdList[0].price;\n\t\t\t}\n\t\t\tif(this.product.spuOtherDto && this.product.spuOtherDto.courierFee){\n\t\t\t\tprice = price + this.product.spuOtherDto.courierFee;\n\t\t\t}\n\t\t\tif(this.couponAmount){\n\t\t\t\tprice= price -this.couponAmount\n\t\t\t}\n\t\t\tif(price<0){\n\t\t\t\tprice =0;\n\t\t\t}\n\t\t\treturn Number(price).toFixed(2);\n\t\t}\n\t},\n\t\n\tonLoad(params){\n\t\tconsole.log('params',params)\n\t\tif(params.id){\n\t\t\tthis.product.id=params.id;\n\t\t}\n\t\tif(params.couponReceiveId){\n\t\t\tthis.couponReceiveId=params.couponReceiveId;\n\t\t}\n\t\tif(params.couponAmount){\n\t\t\tthis.couponAmount=params.couponAmount;\n\t\t}\n\t\t\n\t\tthis.init();\n\t},\n\tonShow(){\n\t\tconsole.log('show参数',this.$root.$mp.query)\n\t\tif(this.$root.$mp.query.id){\n\t\t\tthis.product.id=this.$root.$mp.query.id;\n\t\t}\n\t\tif(this.$root.$mp.query.couponReceiveId){\n\t\t\tthis.couponReceiveId=this.$root.$mp.query.couponReceiveId;\n\t\t}\n\t\tif(this.$root.$mp.query.couponAmount){\n\t\t\tthis.couponAmount=this.$root.$mp.query.couponAmount;\n\t\t}\n\t\t\n\t\tlet order = uni.getStorageSync('order');\n\t\tconsole.log('order1',order)\n\t\tif(order){\n\t\t\tthis.order = JSON.parse(order);\n\t\t\tconsole.log('this.order',this.order)\n\t\t}\n\t\tthis.init();\n\t},\n\tonHide(){\n\t\tthis.orderId='';\n\t\tthis.orderNo = '';\n\t\tuni.setStorageSync('order', JSON.stringify(this.order));\n\t\tconsole.log('order------>',uni.getStorageSync('order'))\n\t},\n\tonUnload(){\n\t\tthis.orderId='';\n\t\tthis.orderNo = '';\n\t},\n\tmethods:{\n\t\tgotoSuccess(price,orderNo,id){\n\t\t\tsetTimeout(()=>{\n\t\t\t\tuni.reLaunch({\n\t\t\t\t\turl: '/pages/product/paySuccess?price='+price+'&orderNo='+orderNo+'&id='+id\n\t\t\t\t});\n\t\t\t},1900)\n\t\t},\n\t\tgotoDetail(id){\n\t\t\tsetTimeout(()=>{\n\t\t\t\tuni.reLaunch({\n\t\t\t\t\turl: '/pages/order/detail?id='+id\n\t\t\t\t});\n\t\t\t},1900)\n\t\t},\n\t\tonBridgeReady(appId,timeStamp,nonceStr,paypackage,paySign,price,orderNo,id){\n\t\t\tconst _this = this;\t\n\t\t   \tWeixinJSBridge.invoke(\n\t\t      \t'getBrandWCPayRequest', {\n\t\t         \t\"appId\":appId,         //公众号名称，由商户传入     \n\t\t\t\t\t\"timeStamp\":timeStamp, //时间戳，自1970年以来的秒数     \n\t\t\t\t\t\"nonceStr\":nonceStr,   //随机串     \n\t\t\t\t\t\"package\":paypackage,\n\t\t\t\t\t\"signType\":\"MD5\",      //微信签名方式：     \n\t\t\t\t\t\"paySign\":paySign      //微信签名 \n\t\t      },\n\t\t      function(res){\n\t\t      \tif(res.err_msg == \"get_brand_wcpay_request:ok\" ){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '支付成功！',\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t});\n\t\t\t\t\t_this.gotoSuccess(price,orderNo,id);\n\t\t\t\t} else if(res.err_msg == \"get_brand_wcpay_request:fail\"){  \n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '支付失败！',\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\turl: '/pages/order/detail?id='+id\n\t\t\t\t\t\t});\n\t\t\t\t\t},1900)\n\t\t\t\t}  \n\t\t\t}); \n\t\t},\n\t\tsubmitWXOrderFun(id,price,orderNo){\n\t\t\tsubmitWXOrder({id: id}).then((dataR)=>{\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.lock = false;\n\t\t\t\t},400)\n\t\t\t\tlet data = dataR.data.result;\n\t\t\t\tif(data.return_code ==\"FAIL\"){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: data.return_msg,\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t});\n\t\t\t\t\tthis.gotoDetail(id)\n\t\t\t\t}else{\n\t\t\t\t\tif(data.result_code==\"FAIL\"){\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: data.err_code_des,\n\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.gotoDetail(id)\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(data.needPay==='FAIL'){\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '下单成功',\n\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.gotoDetail(id)\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t//window.location.href= data.mwebUrl;\n\t\t\t\t\t\t\tvar payappId = data.payappId;\n\t\t\t\t\t\t\tvar paytimestamp = data.paytimestamp;\n\t\t\t\t\t\t\tvar paynonceStr = data.paynonceStr;\n\t\t\t\t\t\t\tvar paypackage = data.paypackage;\n\t\t\t\t\t\t\tvar paySign = data.paySign;\n\t\t\t\t\t\t\t//var sendUrl = data.sendUrl;\n\t\t\t\t\t\t\tthis.onBridgeReady(payappId,paytimestamp,paynonceStr,paypackage,paySign,price,orderNo,id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).catch((e)=>{\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '调用微信支付失败',\n\t\t\t\t\tduration: 2000,\n\t\t\t\t\ticon:'none'\n\t\t\t\t});\n\t\t\t\tthis.gotoDetail(id)\n\t\t\t});\n\t\t},\n\t\tchangeSku(item){\n\t\t\tthis.order.goodsOrderDetailCmdList[0].goodsSkuId = item.id;\n\t\t\tthis.order.goodsOrderDetailCmdList[0].price = item.price;\n\t\t\t//this.order.goodsOrderDetailCmdList = JSON.parse(JSON.stringify(this.order.goodsOrderDetailCmdList))\n\t\t},\n\t\tblurFun(){\n\t\t\tconsole.log('blur')\n\t\t\tif(window){\n\t\t\t\tconsole.log('windowblur')\n\t\t\t\twindow.scrollTo(0, 1)\n\t\t\t}\n\t\t},\n\t\tgetMyCouponByTargetIdFun(){\n\t\t\tgetMyCouponByTargetId(this.params).then(data=>{\n\t\t\t\tif(data.data.retCode===0){\n\t\t\t\t\tif(data.data.result){\n\t\t\t\t\t\tthis.couponNum = data.data.result.total || ''\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.couponNum = ''\n\t\t\t\t}\n\t\t\t}).catch(e=>{\n\t\t\t\tthis.couponNum = ''\n\t\t\t})\n\t\t},\n\t\tpayFun(){\n\t\t\t//调微信支付\n\t\t\tthis.submitWXOrderFun(this.orderId,this.sumPrice,this.orderNo);\n\t\t},\n\t\tcreateOrderFun(){\n\t\t\tif(this.lock){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.lock = true;\n\t\t\tlet order = JSON.parse(JSON.stringify(this.order))\n\t\t\tif(this.couponReceiveId){\n\t\t\t\torder.couponReceiveId = this.couponReceiveId\n\t\t\t}\n\t\t\tconst inviteCode = uni.getStorageSync('inviteCode');\n\t\t\tif(inviteCode){\n\t\t\t\torder.inviteCode = inviteCode;\n\t\t\t}\n\t\t\tcreateOrder(order).then(data=>{\n\t\t\t\tconsole.log('jjll',data)\n\t\t\t\tif(data.data.retCode ===0){\n\t\t\t\t\t/* uni.showToast({\n\t\t\t\t\t\ttitle: '订单提交成功，等待支付',\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t}); */\n\t\t\t\t\tthis.orderId = data.data.result.id;\n\t\t\t\t\tthis.orderNo = data.data.result.orderNo;\n\t\t\t\t\t//调微信支付\n\t\t\t\t\tthis.submitWXOrderFun(data.data.result.id,this.sumPrice,data.data.result.orderNo);\n\t\t\t\t\t//隐藏层\n\t\t\t\t\tthis.closePay();\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('cuowu--',data)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: data.data.retMsg,\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t});\n\t\t\t\t\tthis.lock = false;\n\t\t\t\t}\n\t\t\t}).catch(e=>{\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '提交订单失败',\n\t\t\t\t\tduration: 2000,\n\t\t\t\t\ticon:'none'\n\t\t\t\t});\n\t\t\t\tthis.lock = false;\n\t\t\t})\n\t\t},\n\t\tgetSpuInfoBySpuIdFun(){\n\t\t\tthis.max=10;\n\t\t\tgetSpuInfoBySpuId({id:this.product.id}).then(data=>{\n\t\t\t\tif(data.data.retCode ===0){\n\t\t\t\t\tthis.product = data.data.result;\n\t\t\t\t\t//处理最大购买数\n\t\t\t\t\tif(this.product.stock && this.product.stock<this.max){ \n\t\t\t\t\t\tthis.max = this.product.stock\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.max = 0;\n\t\t\t\t\t}\n\t\t\t\t\t//处理时间\n\t\t\t\t\tif(this.product.spuOtherDto && this.product.spuOtherDto.buyEndDate && this.product.spuOtherDto.buyStartDate){\n\t\t\t\t\t\t/* this.startT = dateUtils.timeToDate(this.product.spuOtherDto.buyStartDate)\n\t\t\t\t\t\tthis.endT = dateUtils.timeToDate(this.product.spuOtherDto.buyEndDate) */\n\t\t\t\t\t\tthis.endTime =dateUtils.getTimeF(this.product.spuOtherDto.buyEndDate);\n\t\t\t\t\t\tconsole.log('this.endTime',this.endTime);\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log('this.product.skus[0].id',this.product.skus[0].id);\n\t\t\t\t\t//给order赋值\n\t\t\t\t\tif(!uni.getStorageSync('order')){\n\t\t\t\t\t\tthis.order.goodsOrderDetailCmdList[0].goodsSkuId = this.product.skus[0].id;\n\t\t\t\t\t\tconsole.log('this.order.goodsOrderDetailCmdList[0].goodsSkuId',this.order.goodsOrderDetailCmdList[0].goodsSkuId);\n\t\t\t\t\t\tthis.order.goodsOrderDetailCmdList[0].goodsSpuId = this.product.skus[0].spuId;\n\t\t\t\t\t\tthis.order.goodsOrderDetailCmdList[0].price = this.product.skus[0].price;\n\t\t\t\t\t\tthis.order.orderType = this.product.typeId;\n\t\t\t\t\t\tif(this.$root.$mp.query.skuId){\n\t\t\t\t\t\t\tthis.order.goodsOrderDetailCmdList[0].goodsSkuId=this.$root.$mp.query.skuId;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(this.$root.$mp.query.skuPrice){\n\t\t\t\t\t\t\tthis.order.goodsOrderDetailCmdList[0].price=this.$root.$mp.query.skuPrice;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t//针对小程序对详情的富文本标签转换\n\n\t\t\t\t\tif(this.product.spuDescDto && this.product.spuDescDto.mobileDesc){\n\t\t\t\t\t\tthis.product.spuDescDto.mobileDesc = this.product.spuDescDto.mobileDesc.replace(/<img/g, '<img style=\"max-width:100%;\"');\n\t\t\t\t\t}\n\t\t\t\t\tif(this.product.spuDescDto && this.product.spuDescDto.bookingNotes){\n\t\t\t\t\t\tthis.product.spuDescDto.bookingNotes = this.product.spuDescDto.bookingNotes.replace(/<img/g, '<img style=\"max-width:100%;\"');\n\t\t\t\t\t}\n\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t//this.setHeight();\n\t\t\t}).catch()\n\t\t},\n\t\tinit(){\n\t\t\tif(this.isToken){\n\t\t\t\tthis.getSpuInfoBySpuIdFun();\n\t\t\t\tthis.getMyCouponByTargetIdFun();\n\t\t\t}\n\t\t\tif(this.$root.$mp.query.address){\n\t\t\t\tlet address = JSON.parse(this.$root.$mp.query.address)\n\t\t\t\tthis.order.goodsOrderAddressCmd.userName = address.userName\n\t\t\t\tthis.order.goodsOrderAddressCmd.userPhone = address.userPhone\n\t\t\t\tthis.order.goodsOrderAddressCmd.userAddress = address.userAddress\n\t\t\t\tconsole.log('this.order.goodsOrderAddressCmd',this.order.goodsOrderAddressCmd)\n\t\t\t}\n\t\t},\n\t\tsubmitFun(){\n\t\t\tif(validator.ifEmpty(this.order.goodsOrderAddressCmd.userName,'请填写联系人姓名')){return ;}\n\t\t\tif(validator.ifEmpty(this.order.goodsOrderAddressCmd.userPhone,'请填写联系人手机')){return ;}\n\t\t\tif(validator.ifPhone(this.order.goodsOrderAddressCmd.userPhone,'联系人手机格式不正确')){return ;}\n\t\t\tthis.$refs.popup.close();\n\t\t\tthis.$refs.popup1.open();\n\t\t\tthis.showPay = true;\n\t\t\t\n\t\t\t/* uni.navigateTo({\n\t\t\t\turl: '/pages/order/detail?id=111111'\n\t\t\t}); */\n\t\t},\n\t\tclosePay(){\n\t\t\tthis.$refs.popup1.close();\n\t\t\tthis.showPay = false;\n\t\t},\n\t\tshowDetailFun(){\n\t\t\tthis.showDetail = true;\n\t\t\tthis.$refs.popup.open();\n\t\t},\n\t\thideDetailF(){\n\t\t\tconsole.log('this---',this)\n\t\t\tlet _this=this;\n\n\t\t\t\t_this = this.$parent;\n\n\t\t\t_this.showDetail = false;\n\t\t},\n\t\thideDetailFun(){\n\t\t\tthis.showDetail = false;\n\t\t\tthis.$refs.popup.close();\n\t\t},\n\t\tstepperChange(obj){\n\t\t\tthis.order.goodsOrderDetailCmdList[0].number = obj.val;\n\t\t}\n\t}\n}\n","import mod from \"-!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=style&index=0&id=54652c74&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\工具软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=style&index=0&id=54652c74&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}