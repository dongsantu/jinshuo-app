(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{"15db":function(t,e,o){"use strict";(function(t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=u(o("a842")),i=o("43fb"),a=o("b78d"),r=u(o("1668"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return l(t)||p(t)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function l(t){if(Array.isArray(t)){for(var e=0,o=new Array(t.length);e<t.length;e++)o[e]=t[e];return o}}var d=function(){return Promise.all([o.e("common/vendor"),o.e("components/tki-qrcode/tki-qrcode")]).then(o.bind(null,"079a"))},m=function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"66ca"))},g=function(){return o.e("components/uni-grid/uni-grid").then(o.bind(null,"f7b9"))},f=function(){return o.e("components/xyz-tab/xyz-tab").then(o.bind(null,"e4a0"))},v=function(){return o.e("components/product-list").then(o.bind(null,"9c23"))},y=function(){return Promise.all([o.e("common/vendor"),o.e("components/footer")]).then(o.bind(null,"9e45"))},b=window.location.origin,T={components:{uniGrid:g,xTab:f,productList:v,footerMenu:y,uniPopup:m,tkiQrcode:d},data:function(){return{cityList:["广州市","深圳市"],followUrl:"",yimaiIcon:n.default,top:0,startAdvObj:"",words:["生命一定要浪费在美好的事物上，体重一定要浪费在美味的食物上，爱情一定要浪费在你爱的人身上","生活有一百种过法，别人的故事再好始终是别人的，活成什么样子，自己决定。","光说不练假把戏，来一场说走就走的旅行吧！","经营好自己，珍惜当下时光，一切该来的总会到。","世界那么大，唯有美食美景与所爱之人不可辜负，不如一起出去走走吃吃喝喝玩玩乐乐~","做一个热爱生活的人吧，从一顿美食，一趟小旅行开始！","携子之手，与子周边游！","生活不易，工作亦是辛苦，不如抽空吃喝玩乐一把！","七月的风，八月的雨，不如一起游玩去~","周边美食，景区等你来选~"],goodList:[],beloading:!1,pages:1,params:{isHot:0,isScareBuy:0,pageNum:1,pageSize:10,qryType:"",areaName:""},fixtop:!1,productList:[],banner:[],tabList:[{label:"热门",id:"1"},{label:"正在开抢",id:"2"},{label:"即将开抢",id:"3"}],menuList:[],background:["color1","color2","color3"],indicatorDots:!0,autoplay:!0,interval:2e3,duration:500}},computed:{shopName:function(){return this.$store.state.shopName?(console.log(t("this.$store.state.shopName",this.$store.state.shopName," at pages\\home\\home.vue:203")),this.$store.state.shopName):""},city:function(){return this.$store.state.city},inviteCode:function(){return this.$store.state.login&&this.$store.state.login.user&&this.$store.state.login.user.userAccount?this.$store.state.login.user.userAccount.inviteCode:""},isToken:function(){return this.$store.state.login?this.$store.state.login.token:""},isFans:function(){return!!(this.$store.state.login&&this.$store.state.login.user&&this.$store.state.login.user.member&&1===this.$store.state.login.user.member.isFans)}},watch:{shopName:function(){this.shopName&&(console.log(t("w:setTitle",this.shopName," at pages\\home\\home.vue:232")),this.setTitle(this.shopName))},city:function(){this.city&&(this.params.areaName=this.city,this.getSpuByPageFun(),this.queryAdByCodeFun())},inviteCode:function(){console.log(t("this.$store.state.login",this.$store.state.login," at pages\\home\\home.vue:244")),this.toShare()},isToken:function(){this.isToken&&setTimeout(function(){r.default.getPosition()},600)}},onLoad:function(){var e=this;this.shopName&&(console.log(t("load:",this.shopName," at pages\\home\\home.vue:255")),this.setTitle(this.shopName)),this.$nextTick(function(){e.setHeight(),window.setTimeout(function(){e.isToken&&e.queryPopAdByCodeFun(),e.getCityListFun()},400)})},onHide:function(){this.fixTop=!1},onShow:function(){this.top=Number(s.getStorageSync("fixtop")||0),this.init(),s.removeStorageSync("order"),console.log(t(" uni",s," at pages\\home\\home.vue:277"))},onPageScroll:function(t){t.scrollTop>=this.top?this.fixtop=!0:this.fixtop=!1},onReachBottom:function(){this.params.pageNum+=1,this.pages>=this.params.pageNum&&this.getSpuByPageFun()},methods:{setTitle:function(e){console.log(t("title",e," at pages\\home\\home.vue:315")),s.setNavigationBarTitle({title:e})},getCityListFun:function(){var t=this;(0,a.getCityList)({shopId:this.$store.state.shopId}).then(function(e){0===e.data.retCode&&(t.cityList=e.data.result)}).catch()},switchCity:function(t){this.$store.commit("setCity",t),this.hideCity()},qrR:function(e){console.log(t("qrC:",e," at pages\\home\\home.vue:332"))},createQrcodeFun:function(){var e=this;console.log(t("createQrcodeFun"," at pages\\home\\home.vue:335")),this.followUrl="";var o=window.location.origin,s=o+"/#/?shopId="+this.$store.state.shopId,n="";this.$root.$mp.query.inviteCode&&(n=this.$root.$mp.query.inviteCode),0===this.$store.state.shopType&&n&&(s=s+"&inviteCode="+n);var a={inviteCode:n,shopId:this.$store.state.shopId,url:s};(0,i.createQrcode)(a).then(function(o){0===o.data.retCode&&(e.followUrl=o.data.result,console.log(t("this.followUrl",e.followUrl," at pages\\home\\home.vue:356")),e.$refs.popupTopTips.open())}).catch(function(t){})},showTopTips:function(){this.createQrcodeFun()},hideTopTips:function(){this.$refs.popupTopTips.close()},showCity:function(){this.$refs.popupCity.open()},hideCity:function(){this.$refs.popupCity.close()},checkTime:function(e){var o=!1,n=new Date;n=n.getTime();var i=s.getStorageSync("startAdvTime");return console.log(t("lastTime",i," at pages\\home\\home.vue:384")),console.log(t("nowTime",n," at pages\\home\\home.vue:385")),console.log(t("---checkTime :",n-Number(i)-864e5*e," at pages\\home\\home.vue:386")),i?(o=n-Number(i)-864e5*e>0,o&&s.setStorageSync("startAdvTime",n)):(o=!0,s.setStorageSync("startAdvTime",n)),o},showMenu1:function(){this.$refs.popup1.open()},hideMenu1:function(){console.log(t("-----\x3e"," at pages\\home\\home.vue:402")),this.$refs.popup1.close()},queryPopAdByCodeFun:function(){var t=this;(0,a.queryPopAdByCode)({code:"indexStart",shopId:this.$store.state.shopId}).then(function(e){0===e.data.retCode&&(t.startAdvObj=e.data.result,t.startAdvObj&&(0===t.startAdvObj.showType&&t.startAdvObj.popUpFlag?t.showMenu1():1===t.startAdvObj.showType&&t.startAdvObj.gapTime&&t.checkTime(t.startAdvObj.gapTime)&&t.showMenu1()))}).catch()},goPage:function(t){window.location.href=t},queryAdByCodeFun:function(){var t=this,e=this.city||"广州市";(0,a.queryAdByCode)({code:"homeBanner",shopId:this.$store.state.shopId,areaName:e}).then(function(e){0===e.data.retCode&&e.data.result&&e.data.result.list&&(t.banner=e.data.result.list.map(function(e){return{img:t.$imgHost+e.image,link:e.url}}))}).catch()},getExcellentFun:function(){var t=this;(0,a.getExcellent)({count:5,shopId:this.$store.state.shopId}).then(function(e){0===e.data.retCode&&(t.goodList=e.data.result.map(function(t){return t.name.length>16?t.sortName=t.name.substr(0,14)+"...":t.sortName=t.name,t})),t.$nextTick(function(){t.setHeight()})}).catch()},getFirstPageCategorysFun:function(){var t=this;(0,a.getFirstPageCategorys)({shopId:this.$store.state.shopId}).then(function(e){0===e.data.retCode&&(t.menuList=e.data.result.map(function(e){return{image:t.$imgHost+e.pictureUrl,text:e.name,url:"/pages/product/list?shopId="+t.$store.state.shopId,categoryId:e.id}})),t.$nextTick(function(){t.setHeight()})}).catch()},toShare:function(){var e=window.location.href.split("#")[0];console.log(t("home-toshare:",window.location.href+"?inviteCode="+this.inviteCode," at pages\\home\\home.vue:476"));var o=b+"?shopId="+this.$store.state.shopId;0===this.$store.state.shopType&&(o=o+"&inviteCode="+this.inviteCode);var s=this.words[Math.floor(10*Math.random())];console.log(t("desc",s," at pages\\home\\home.vue:482"));var n={title:"亿麦周边游",desc:s||"快来跟我们一起亿麦周边游吧！",linkurl:o,img:"http://img.ymzby.com/10088/1/129603212297633792/co/66f76062-b193-498c-986d-ab97964856a1.png"};r.default.getJSSDK(e,n)},changTab:function(t){this.params.pageNum=1,this.pages=1;var e=this;0===t?(e.params.isHot=0,e.params.qryType="",e.getSpuByPageFun()):1===t?(e.params.isHot="",e.params.qryType=1,e.getSpuByPageFun()):2===t&&(e.params.isHot="",e.params.qryType=2,e.getSpuByPageFun())},setHeight:function(){console.log(t("fixtop:",this.fixtop," at pages\\home\\home.vue:513"));var e=this,o=s.createSelectorQuery();o.select("#fixTop").boundingClientRect(),o.exec(function(o){console.log(t("res",o," at pages\\home\\home.vue:518")),0!=o[0].top&&(e.top=o[0].top,s.setStorageSync("fixtop",e.top))})},init:function(){this.getSpuByPageFun(),this.getFirstPageCategorysFun(),this.getExcellentFun(),this.queryAdByCodeFun(),this.isToken&&setTimeout(function(){r.default.getPosition()},600)},getSpuByPageFun:function(){var e=this;console.log(t("this.params.pageNum---",this.params.pageNum," at pages\\home\\home.vue:543")),console.log(t("this.params.pageNum===1---",1===this.params.pageNum," at pages\\home\\home.vue:544")),1===this.params.pageNum&&(this.productList=[]),console.log(t("this.productList0->",this.productList," at pages\\home\\home.vue:548")),this.beloading=!0,this.params.shopId=this.$store.state.shopId,(0,a.getSpuByPage)(this.params).then(function(o){if(e.beloading=!1,console.log(t("data---",o," at pages\\home\\home.vue:553")),0===o.data.retCode){var s=o.data.result.list.map(function(t){return t.name.length>26?t.sortName=t.name.substr(0,25)+"...":t.sortName=t.name,t});console.log(t("this.productList->",e.productList," at pages\\home\\home.vue:564")),e.productList=[].concat(c(e.productList),c(s)),console.log(t("this.productList1->",e.productList," at pages\\home\\home.vue:566")),e.pages=o.data.result.pages,e.params.pageNum=o.data.result.pageNum,console.log(t("data.data.result.pageNum",o.data.result.pageNum," at pages\\home\\home.vue:569"))}}).catch(function(t){e.beloading=!1})}}};e.default=T}).call(this,o("0de9")["default"],o("6e42")["default"])},3322:function(t,e,o){"use strict";var s,n=function(){var t=this,e=t.$createElement;t._self._c},i=[];o.d(e,"b",function(){return n}),o.d(e,"c",function(){return i}),o.d(e,"a",function(){return s})},4050:function(t,e,o){"use strict";var s=o("eae3"),n=o.n(s);n.a},"5c7b":function(t,e,o){"use strict";(function(t){o("20e7"),o("921b");s(o("66fd"));var e=s(o("b47a"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},"90fa":function(t,e,o){"use strict";o.r(e);var s=o("15db"),n=o.n(s);for(var i in s)"default"!==i&&function(t){o.d(e,t,function(){return s[t]})}(i);e["default"]=n.a},b47a:function(t,e,o){"use strict";o.r(e);var s=o("3322"),n=o("90fa");for(var i in n)"default"!==i&&function(t){o.d(e,t,function(){return n[t]})}(i);o("4050");var a,r=o("f0c5"),u=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,"5ec889bc",null,!1,s["a"],a);e["default"]=u.exports},eae3:function(t,e,o){}},[["5c7b","common/runtime","common/vendor"]]]);