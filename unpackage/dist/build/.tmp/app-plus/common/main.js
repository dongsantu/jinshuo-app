(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"0cf2":function(t,e,o){"use strict";o.r(e);var n=o("b6c6"),s=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);e["default"]=s.a},"5c6c":function(t,e,o){"use strict";o.r(e);var n=o("0cf2");for(var s in n)"default"!==s&&function(t){o.d(e,t,function(){return n[t]})}(s);o("7ca2");var a,i,r,c,p=o("f0c5"),d=Object(p["a"])(n["default"],a,i,!1,null,null,null,!1,r,c);e["default"]=d.exports},"70a9":function(t,e,o){"use strict";(function(t){o("20e7"),o("921b");var e=i(o("66fd")),n=i(o("5c6c")),s=i(o("51d9"));o("f975"),o("1d92"),o("72bd");var a=o("9413");function i(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},n=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(e){c(t,e,o[e])})}return t}function c(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}o("f2df");var p=function(){return o.e("components/empty").then(o.bind(null,"9089"))};e.default.config.productionTip=!1,e.default.prototype.$store=s.default,e.default.prototype.$imgHost=a.imgHost,e.default.component("empty",p),n.default.mpType="app";var d=new e.default(r({store:s.default},n.default));t(d).$mount()}).call(this,o("6e42")["createApp"])},"7ca2":function(t,e,o){"use strict";var n=o("ff31"),s=o.n(n);s.a},b6c6:function(t,e,o){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=r(o("a34a")),a=o("9413"),i=o("43fb");function r(t){return t&&t.__esModule?t:{default:t}}function c(t,e,o,n,s,a,i){try{var r=t[a](i),c=r.value}catch(p){return void o(p)}r.done?e(c):Promise.resolve(c).then(n,s)}function p(t){return function(){var e=this,o=arguments;return new Promise(function(n,s){var a=t.apply(e,o);function i(t){c(a,n,s,i,r,"next",t)}function r(t){c(a,n,s,i,r,"throw",t)}i(void 0)})}}window.location.origin;var d=o("087c"),l={onLaunch:function(){console.log(t("App Launch"," at App.vue:10"));var e=n.getStorageSync("token"),o=n.getStorageSync("shopId"),s=d.parse(location.href.split("?")[1]),a="";s&&s.shopId?a=s.shopId.split("#")[0]:location.href.split("shopId=").length>1&&(a=location.href.split("shopId=")[1],a&&(a=a.split("&")[0].split("#")[0])),o&&o!==a?this.$store.commit("CHANGE_TOKEN",""):e&&this.$store.commit("CHANGE_TOKEN",e),n.setStorageSync("shopId",a),this.$store.commit("setShopId",a),console.log(t("store.shopId:",this.$store.state.shopId," at App.vue:32"));var i=n.getStorageSync("shopName");i&&this.$store.commit("setShopName",i);var r=n.getStorageSync("shopLogo");r&&this.$store.commit("setShopLogo",r);var c=n.getStorageSync("shopDesc");c&&this.$store.commit("setShopDesc",c)},onShow:function(){console.log(t("App Show"," at App.vue:51"))},onHide:function(){console.log(t("App Hide"," at App.vue:54"))},methods:{wxInit:function(){var e=p(s.default.mark(function e(){var o,r,c,p,l,u,h,f=this;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=n.getStorageSync("failtry"),r={code:""},c=d.parse(location.href.split("?")[1]),c&&c.code&&(r.code=c.code),c&&c.inviteCode?r.inviteCode=c.inviteCode:location.href.split("inviteCode=").length>1&&(r.inviteCode=location.href.split("inviteCode=")[1],r.inviteCode.indexOf("&")>-1&&(r.inviteCode=r.inviteCode.split("&")[0])),p=this.$store.state.shopId,console.log(t("parsed",c," at App.vue:96")),console.log(t("parsed.code::::",c.code," at App.vue:97")),console.log(t("this.$store.state",this.$store.state," at App.vue:98")),!this.$store.state.login.token||""==this.$store.state.login.token){e.next=14;break}console.log(t("已存在 accessToken："+this.$store.state.login.token," at App.vue:100")),this.$store.dispatch("getUserInfoAction"),e.next=45;break;case 14:return e.prev=14,console.log(t("getConfig--shopId:",this.$store.state.shopId," at App.vue:116")),e.next=18,(0,i.getConfig)({shopId:this.$store.state.shopId});case 18:if(l=e.sent,console.log(t("shopobj",l," at App.vue:118")),!l.data||!l.data.result){e.next=29;break}this.$store.commit("setAppId",l.data.result.appid),this.$store.commit("setComponentAppId",l.data.result.component_appid),this.$store.commit("setShopType",l.data.result.type),this.$store.commit("setShopName",l.data.result.shopName),this.$store.commit("setShopLogo",l.data.result.logo),this.$store.commit("setShopDesc",l.data.result.sketch),e.next=30;break;case 29:return e.abrupt("return");case 30:e.next=36;break;case 32:return e.prev=32,e.t0=e["catch"](14),n.showToast({title:e.t0.retMsg,duration:2e3}),e.abrupt("return");case 36:console.log(t("appid----",this.$store.state.appid," at App.vue:138")),console.log(t("shopType----",this.$store.state.shopType," at App.vue:139")),console.log(t("appId",a.appId," at App.vue:141")),u=window.location.href,h=window.location.origin+"/#/?shopId="+p,r.inviteCode&&(h=h+"&inviteCode="+r.inviteCode),console.log(t("parsed:::",c," at App.vue:148")),console.log(t("data--\x3e",r," at App.vue:149")),c.code&&null!=c.code&&""!==c.code?(r.shopId=this.$store.state.shopId,console.log(t("getsession-data:",r," at App.vue:160")),(0,i.getSession)(r).then(function(e){console.log(t("data:",e," at App.vue:162")),0===e.data.retCode||o?500==e.data.retCode?n.showToast({title:e.data.retMsg||"授权登录失败",duration:2e3,icon:"none"}):(n.removeStorageSync("failtry"),f.$store.commit("CHANGE_TOKEN",e.data.result.token),f.$store.dispatch("getUserInfoAction")):(n.setStorageSync("failtry","1"),window.location.href="http://h5.ymzby.com/index.html?appid=".concat(f.$store.state.appid,"&redirect_uri=").concat(encodeURIComponent(h),"&response_type=code&scope=snsapi_userinfo&state=1&component_appid=").concat(f.$store.state.component_appid,"#wechat_redirect"))}).catch(function(t){o?n.showToast({title:"授权登陆失败，请稍后重新进入",duration:2e3,icon:"none"}):(n.setStorageSync("failtry","1"),window.location.href="http://h5.ymzby.com/index.html?appid=".concat(f.$store.state.appid,"&redirect_uri=").concat(encodeURIComponent(h),"&response_type=code&scope=snsapi_userinfo&state=1&component_appid=").concat(f.$store.state.component_appid,"#wechat_redirect"))})):(console.log(t("没带code,进行跳转 "," at App.vue:151")),window.location.href="http://h5.ymzby.com/index.html?appid=".concat(this.$store.state.appid,"&redirect_uri=").concat(encodeURIComponent(u),"&response_type=code&scope=snsapi_userinfo&state=1&component_appid=").concat(this.$store.state.component_appid,"#wechat_redirect"));case 45:case"end":return e.stop()}},e,this,[[14,32]])}));function o(){return e.apply(this,arguments)}return o}()}};e.default=l}).call(this,o("0de9")["default"],o("6e42")["default"])},ff31:function(t,e,o){}},[["70a9","common/runtime","common/vendor"]]]);